# cento_s

运维脚本记录 - 用友NC系统日志管理工具

## 项目简介

本项目包含一系列用于用友NC系统运维的Shell脚本，主要用于日志文件的备份、清理和管理操作。这些脚本可以帮助运维人员自动化处理日常的日志管理任务。

## 功能特性

### 📁 脚本功能

1. **日志备份脚本** (`copy_logs.sh`)
   - 自动备份NC系统的日志文件
   - 按日期组织备份文件结构
   - 支持日志记录和错误处理

2. **发票文件备份脚本** (`copy_fp.sh`)
   - 专门备份发票和图片相关文件
   - 自动压缩备份文件
   - 清理原始文件以节省存储空间

3. **日志清理脚本** (`clean_logs.sh`)
   - 自动清理两天前的日志文件
   - 防止日志文件占用过多磁盘空间

## 文件结构

```
cento_s/
├── README.md                                    # 项目说明文档
├── clean_logs.sh                               # 日志清理脚本
├── copy_fp.sh                                  # 发票文件备份脚本
├── copy_logs.sh                                # 日志备份脚本
└── bip需求：费用申请单自定义字段根据供应商参照银行账户.pdf  # 业务需求文档
```

## 使用方法

### 前置条件

- Linux/Unix 系统环境
- Bash shell
- 适当的文件系统权限

### 脚本执行

#### 1. 日志备份
```bash
# 给脚本添加执行权限
chmod +x copy_logs.sh

# 执行日志备份
./copy_logs.sh
```

#### 2. 发票文件备份
```bash
# 给脚本添加执行权限
chmod +x copy_fp.sh

# 执行发票文件备份
./copy_fp.sh
```

#### 3. 日志清理
```bash
# 给脚本添加执行权限
chmod +x clean_logs.sh

# 执行日志清理
./clean_logs.sh
```

### 定时任务设置

建议将脚本添加到crontab中实现自动化执行：

```bash
# 编辑crontab
crontab -e

# 添加定时任务示例
# 每天凌晨2点执行日志备份
0 2 * * * /path/to/cento_s/copy_logs.sh

# 每天凌晨3点执行发票文件备份
0 3 * * * /path/to/cento_s/copy_fp.sh

# 每天凌晨4点执行日志清理
0 4 * * * /path/to/cento_s/clean_logs.sh
```

## 配置说明

### 目录配置

各脚本中的关键目录配置：

- **源日志目录**: `/data/yonyou/home/nclogs`
- **备份目标目录**: `/data/nclogbackup/`
- **日志备份目录**: `/data/nclogbackup/logs/`

### 文件匹配规则

- **日志文件**: `nc-log*`
- **发票文件**: `*fapiao*` 或 `*imag*`
- **默认目录**: `default*`

## 注意事项

1. **权限要求**: 确保脚本有足够的权限访问源目录和目标目录
2. **磁盘空间**: 定期检查备份目录的磁盘空间使用情况
3. **日志监控**: 关注脚本执行日志，及时发现和处理错误
4. **备份验证**: 定期验证备份文件的完整性和可用性

## 维护说明

- 定期检查脚本的执行情况
- 根据实际需求调整备份策略和清理策略
- 及时更新脚本以适应系统环境变化

## 版本历史

- **v1.0**: 初始版本，包含基础的日志备份和清理功能

## 联系方式

如有问题或建议，请联系项目维护人员。

---

*最后更新时间: 2024年*
